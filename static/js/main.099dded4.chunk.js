(this["webpackJsonpstream-polls"]=this["webpackJsonpstream-polls"]||[]).push([[0],{13:function(e,t,a){e.exports=a.p+"static/media/abstract.41f88693.jpg"},33:function(e,t,a){e.exports=a.p+"static/media/close.e3380abb.svg"},34:function(e,t,a){e.exports=a(74)},39:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(30),c=a.n(s),l=a(5),o=a(3),u=a(13),i=a.n(u);a(39);var m=function(){return r.a.createElement("div",{className:"home-page",style:{background:'url("'.concat(i.a,'")'),backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}},r.a.createElement(l.b,{to:"/signup/creator",className:"btn btn-creator"},"Are you a creator"),r.a.createElement(l.b,{to:"/signup/user",className:"btn btn-user"},"Are you a user"))},p=a(2),d=a.n(p),b=a(6),f=a(14),v=a(10),E=a(1);a(46);var h=function(e){var t=e.heading,a=e.children;return r.a.createElement("div",{className:"form-container"},r.a.createElement("form",{className:"sign-in-form"},r.a.createElement("h1",null,t),a))};a(47);var g=function(e){var t=e.name,a=e.type,n=e.value,s=e.id,c=e.errors,l=e.onInputChange,o=e.link;return r.a.createElement("div",{className:"input-container"},r.a.createElement("div",{className:"label-text"},r.a.createElement("span",{className:"text"},t),r.a.createElement("a",{href:"#1",className:"text-2 bb-1"},o)),r.a.createElement("div",{className:"input-wrapper"},r.a.createElement("input",{id:s,type:a,value:n,onChange:l}),r.a.createElement("span",{style:{color:"red"}},c)))};a(48);var w=function(e){var t=e.onInputChange,a=e.fields,n=e.errors,s=e.onSubmit;return r.a.createElement("div",{className:"login-page",style:{background:'url("'.concat(i.a,'")'),backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}},r.a.createElement(h,{heading:"Login",footerText:"Not a member?",footerLinkText:"Sign up now",footerLinkAddress:"/",onSubmit:s},r.a.createElement(g,{name:"Email",id:"email",type:"text",value:a.email,errors:n.email,onInputChange:t}),r.a.createElement(g,{name:"Password",id:"password",type:"password",link:"Forgot?",value:a.password,errors:n.password,onInputChange:t}),r.a.createElement("div",{className:"form-btn"},r.a.createElement("button",{onClick:s,className:"btn action-btn"},"Sign in")),r.a.createElement("div",{className:"footer"},r.a.createElement("span",{className:"text-2"},"Not a member?"),r.a.createElement(l.b,{className:"text-2 bb-1",to:"/"},"Sign up now"))))},N=a(32),k=a.n(N).a.create({baseURL:"https://stream-polls.herokuapp.com/api/v1"}),j=function(e){alert(e.data.message)};var O=function(){var e=Object(o.g)(),t=Object(n.useState)({email:"",password:""}),a=Object(E.a)(t,2),s=a[0],c=a[1],l=Object(n.useState)({}),u=Object(E.a)(l,2),i=u[0],m=u[1],p=Object(n.useState)(!1),h=Object(E.a)(p,2),g=h[0],N=h[1],O=function(){var t=Object(b.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),g){t.next=3;break}return t.abrupt("return",alert("Form is not valid"));case 3:return t.prev=3,t.next=6,k.post("/users/login",s);case 6:n=t.sent,localStorage.setItem("token",n.data.token),e.push("/polls"),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),t.t0.response&&j(t.t0.response);case 14:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(w,{fields:s,onInputChange:function(e){var t=e.target,a=t.id,n=t.value,r=Object(v.a)(Object(v.a)({},s),{},Object(f.a)({},a,n));c(r),function(e){var t={},a=!0;e.email||(a=!1,t.email="Please provide Email"),e.password||(a=!1,t.password="Please provide password"),m(t),N(a)}(r)},onSubmit:O,errors:i})};a(66);var x=function(){return r.a.createElement("div",{className:"page-404"},r.a.createElement("h1",null,"Page not found."),r.a.createElement("h2",null,"Please check the URL"))};a(67);var y=function(e){var t=e.onInputChange,a=e.fields,n=e.errors,s=e.onSubmit;return r.a.createElement("div",{className:"signup-page",style:{background:'url("'.concat(i.a,'")'),backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}},r.a.createElement(h,{heading:"Signup",footerText:"Already a member?",footerLinkText:"Sign in",footerLinkAddress:"/login",onSubmit:s},r.a.createElement(g,{name:"Email",id:"email",type:"text",value:a.email,errors:n.email,onInputChange:t}),r.a.createElement(g,{name:"Password",id:"password",type:"password",value:a.password,errors:n.password,onInputChange:t}),r.a.createElement(g,{name:"Password Confirm",id:"passwordConfirm",type:"password",value:a.passwordConfirm,errors:n.passwordConfirm,onInputChange:t}),r.a.createElement("div",{className:"form-btn"},r.a.createElement("button",{onClick:s,className:"btn action-btn"},"Sign up")),r.a.createElement("div",{className:"footer"},r.a.createElement("span",{className:"text-2"},"Already a member?"),r.a.createElement(l.b,{className:"text-2 bb-1",to:"/login"},"Sign in"))))};var S=function(e){var t={email:"",password:"",passwordConfirm:""},a=Object(n.useState)(t),s=Object(E.a)(a,2),c=s[0],l=s[1],u=Object(n.useState)({}),i=Object(E.a)(u,2),m=i[0],p=i[1],h=Object(n.useState)(!1),g=Object(E.a)(h,2),w=g[0],N=g[1],O=function(e){var t=e.target,a=t.id,n=t.value,r=Object(v.a)(Object(v.a)({},c),{},Object(f.a)({},a,n));l(r),function(e){var t={},a=!0;e.email||(a=!1,t.email="Please provide Email"),e.password||(a=!1,t.password="Please provide password"),e.password!==e.passwordConfirm&&(a=!1,t.passwordConfirm="Password and Password confirm should match"),new RegExp("^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{8,16}$").test(e.password)||(a=!1,t.password="8 to 15 characters,1 lowercase letter,  uppercase letter,  numeric digit, , special character"),p(t),N(a)}(r)},x=function(){var e=Object(b.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),w){e.next=3;break}return e.abrupt("return",alert("Form is not valid"));case 3:return e.prev=3,e.next=6,k.post("/users/signup",c);case 6:l(t),alert("Successfully signed up. Login to continue"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),j(e.t0.response);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}();return function(){var t=e.match.params.id;return"creator"!==t&&"user"!==t?r.a.createElement(o.a,{to:{pathname:"/page404"}}):(c.role=t,r.a.createElement(y,{fields:c,onInputChange:O,onSubmit:x,errors:m}))}()};a(68);function C(e){var t=e.handleLogout;return r.a.createElement("button",{onClick:t,className:"btn logout-btn"},"Logout")}function I(){return r.a.createElement(C,{handleLogout:function(){window.confirm("Are you sure want to logout")&&localStorage.removeItem("token")}})}a(69);function A(e){var t=e.fields,a=e.handleAddField,n=e.renderFields,s=e.onInputChange,c=e.onSubmit,o=e.uniqueID;return r.a.createElement("div",{className:"creator-polls-page"},r.a.createElement("div",{className:"polls-container"},r.a.createElement("div",{className:"polls-content"},r.a.createElement("form",null,r.a.createElement("div",{className:"create-form-wrapper"},r.a.createElement("h1",null,"Create Poll")," ",r.a.createElement("div",{className:"logout-btn-wrapper"},r.a.createElement("span",{className:"unique-id"},"Your Unique ID: ",o),r.a.createElement(I,null))),r.a.createElement("div",{className:"block"},r.a.createElement("label",{className:"label"},"Question"),r.a.createElement("div",{className:"field"},r.a.createElement("input",{id:"question",type:"text",value:t.question,onChange:s})),r.a.createElement("label",{className:"label"},"Answer Options"),n(t)),r.a.createElement("div",{className:"poll-btns"},r.a.createElement("div",{className:"poll-btns-left"},r.a.createElement("button",{onClick:c,className:"btn poll-btn"},"Create Poll"),r.a.createElement("button",{onClick:a,className:"btn field-btn"},"Add Field")),r.a.createElement("div",{className:"poll-btns-right"},r.a.createElement(l.b,{to:"/mypolls"},r.a.createElement("button",{className:"btn results-btn"},"Show Results"))))))))}var P=function(e){var t=e.user,a=Object(n.useState)({question:"Enter your question here..",answers:["Choose an answer..."]}),s=Object(E.a)(a,2),c=s[0],l=s[1];function o(e){var t=e.target,a=t.value,n=t.id,r=Object(v.a)({},c);if("question"===n&&(r[n]=a),n.includes("answer")){var s=n.split("-")[0],o=n.split("-")[1];r[s][o]=a}l(r)}function u(){return(u=Object(b.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}},e.prev=2,n={poll:{question:c.question,answers:c.answers}},e.next=6,k.post("/users/polls",n,a);case 6:alert("Poll successfully created"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),e.t0.response&&j(e.t0.response);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}return r.a.createElement(A,{fields:c,handleAddField:function(e){e.preventDefault();var t=Object(v.a)({},c);t.answers.push("Choose an answer"),l(t)},renderFields:function(e){return e.answers.map((function(e,t){return r.a.createElement("div",{key:t,className:"field"},r.a.createElement("input",{id:"answers-".concat(t),type:"text",onChange:o,value:e}))}))},onInputChange:o,onSubmit:function(e){return u.apply(this,arguments)},uniqueID:t.uniqueID})},q=(a(70),a(33)),L=a.n(q);var D=function(e){var t=e.poll,a=e.handleDelete;return r.a.createElement("div",{className:"poll",id:t._id},r.a.createElement("header",{className:"header"},r.a.createElement("h2",{className:"question"},t.question),r.a.createElement("button",{onClick:a,className:"delete-btn"},r.a.createElement("img",{className:"cross-icon",src:L.a,alt:"delete-icon"}))),r.a.createElement("div",{className:"my-poll-info"},"The result after ",t.totalVotes," people voted:"),r.a.createElement("div",{className:"results"},t.answers.map((function(e,a){return r.a.createElement("div",{key:a,className:"ans-block"},r.a.createElement("div",{className:"ans-block-left"},e),r.a.createElement("div",{className:"ans-block-right"},r.a.createElement("div",{className:"ans-percentage"},(n=t.answersCount[a],0===(s=t.totalVotes)?"0%":(100*n/s).toFixed(2).toString()+"%")),r.a.createElement("div",{className:"ans-votes"},"(",t.answersCount[a]," Votes)")));var n,s})),r.a.createElement("div",{className:"total-votes"},"Total Votes: ",r.a.createElement("span",null,t.totalVotes)," ")))};a(71);var R=function(e){var t=e.polls,a=e.onInputChange,n=e.onSubmit,s=e.code,c=e.isButtonClicked,l=e.onVote,o=e.user,u=e.errors;return r.a.createElement("div",{className:"user-polls-page"},r.a.createElement("div",{className:"user-polls-container"},c?t.map((function(e,n){return o.submittedPolls.includes(e._id)?r.a.createElement(D,{key:e._id,poll:e}):r.a.createElement("form",{id:e._id,key:e._id,className:"poll"},r.a.createElement("div",{className:"headers"},r.a.createElement("h2",null,t[n].question)),t[n].answers.map((function(e,t){return r.a.createElement("div",{key:t,className:"input-box"},r.a.createElement("input",{name:"poll-radio",onChange:a,type:"radio",id:"poll-answer-".concat(t),value:t}),r.a.createElement("label",{className:"checkbox-label"},e))})),r.a.createElement("div",{className:"submit-vote"},r.a.createElement("button",{onClick:l,className:"btn vote-btn"},"Vote")))})):c?void 0:r.a.createElement("form",{className:"code-form"},r.a.createElement("div",{className:"logout-btn-user"},r.a.createElement(I,null)),r.a.createElement("label",{className:"label mb-15"},"Enter Creator's unique Code"),r.a.createElement("div",{className:"code-input-wrapper"},r.a.createElement("input",{className:"code-input mb-15",type:"text",name:"code",id:"code",onChange:a,value:s}),r.a.createElement("span",{className:"error"},u.code)),r.a.createElement("button",{onClick:n,className:"btn submit-code-btn mb-15"},"Submit Code"))))};var F=function(e){var t=e.user,a=Object(n.useState)({code:"",selectedAnswer:null}),s=Object(E.a)(a,2),c=s[0],l=s[1],o=Object(n.useState)([]),u=Object(E.a)(o,2),i=u[0],m=u[1],p=Object(n.useState)(!1),f=Object(E.a)(p,2),h=f[0],g=f[1],w=Object(n.useState)({}),N=Object(E.a)(w,2),O=N[0],x=N[1],y=Object(n.useState)(!1),S=Object(E.a)(y,2),C=S[0],I=S[1],A=Object(n.useState)(!1),P=Object(E.a)(A,2),q=P[0],L=P[1];function D(){return(D=Object(b.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),C){e.next=4;break}return alert("Form is not valid"),e.abrupt("return");case 4:return a={headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}},e.prev=5,e.next=8,k.get("/users/".concat(c.code,"/polls"),a);case 8:n=e.sent,m(n.data.data.polls),g(!0),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),j(e.t0.response);case 16:case"end":return e.stop()}}),e,null,[[5,13]])})))).apply(this,arguments)}function F(){return(F=Object(b.a)(d.a.mark((function e(t){var a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),q){e.next=3;break}return e.abrupt("return",alert("Please select an answer"));case 3:return a=t.target.closest(".poll").id,n={headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}},r={selectedAnswer:c.selectedAnswer},e.prev=6,e.next=9,k.patch("/users/".concat(c.code,"/polls/").concat(a),r,n);case 9:alert("Sucessfully voted"),window.location.reload(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),j(e.t0.response);case 16:case"end":return e.stop()}}),e,null,[[6,13]])})))).apply(this,arguments)}return r.a.createElement(R,{onInputChange:function(e){var t=e.target,a=t.id,n=t.value,r=Object(v.a)({},c);"code"===a&&(r[a]=n),a.includes("poll-answer")&&(r.selectedAnswer=n),l(r),function(e){var t=!0,a=!0,n=Object(v.a)({},O);""===e.code&&(n.code="Required",t=!1),e.selectedAnswer||(n.selectedAnswer="Required",a=!1),x(n),I(t),L(a)}(r)},onSubmit:function(e){return D.apply(this,arguments)},errors:O,code:c.code,isButtonClicked:h,polls:i,onVote:function(e){return F.apply(this,arguments)},user:t})};var z=function(e){return e.user?"creator"===e.user.role?r.a.createElement(P,e):"user"===e.user.role?r.a.createElement(F,e):r.a.createElement("div",null,"Loading..."):r.a.createElement("div",null,"Loading...")};a(72);var B=function(e){var t=e.polls,a=e.handleRefresh,n=e.handleDelete;return r.a.createElement("div",{className:"my-polls-page"},r.a.createElement("div",{className:"my-polls-container"},r.a.createElement("div",{className:"my-polls-btns"},r.a.createElement(l.b,{to:"/polls"},r.a.createElement("button",{className:"btn poll-btn my-poll-btn"},"Create Poll")),r.a.createElement("div",{className:"ref-button-wrapper"},r.a.createElement("button",{onClick:a,className:"btn refresh-btn"},"Refresh Results"))),0===t.length?r.a.createElement("h1",null,"No polls to show"):t.length>0?t.map((function(e){return r.a.createElement(D,{key:e._id,poll:e,handleDelete:n})})):r.a.createElement("h1",null,"Loading...")))};var V=function(e){var t=Object(n.useState)([]),a=Object(E.a)(t,2),s=a[0],c=a[1];function l(){window.location.reload()}function u(e){return i.apply(this,arguments)}function i(){return(i=Object(b.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Are you sure want to delete this poll")){e.next=2;break}return e.abrupt("return");case 2:return a=t.target.closest(".poll").id,n={headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}},e.prev=4,e.next=7,k.delete("/users/polls/".concat(a),n);case 7:alert("Poll successfully deleted"),window.location.reload(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),e.t0.response&&j(e.t0.response);case 14:case"end":return e.stop()}}),e,null,[[4,11]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){function e(){return(e=Object(b.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}},e.prev=1,e.next=4,k.get("/users/mypolls",t);case 4:a=e.sent,c(a.data.data.polls),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),e.t0.response&&j(e.t0.response);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),e.user?"creator"===e.user.role?r.a.createElement(B,{handleDelete:u,handleRefresh:l,polls:s}):"user"===e.user.role?r.a.createElement(o.a,{to:{pathname:"/page404"}}):r.a.createElement("div",null,"Loading..."):r.a.createElement("div",null,"Loading...")},T=a(16),_=function(){var e=Object(n.useState)(null),t=Object(E.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)({}),c=Object(E.a)(s,2),l=c[0],o=c[1];return Object(n.useEffect)((function(){function e(){return(e=Object(b.a)(d.a.mark((function e(){var t,a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("token")){e.next=4;break}return r(!1),e.abrupt("return");case 4:return a={headers:{Authorization:"Bearer ".concat(t)}},e.prev=5,e.next=8,k.get("/users/isSignedIn",a);case 8:n=e.sent,r(!0),o(n.data.data.user),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),r(!1);case 16:case"end":return e.stop()}}),e,null,[[5,13]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),[l,a]};function U(e){var t=e.component,a=Object(T.a)(e,["component"]),n=_(a.user,a.isSignedIn),s=Object(E.a)(n,2),c=s[0],l=s[1];return r.a.createElement(o.b,Object.assign({},a,{render:function(e){return!0===l?r.a.createElement(t,Object.assign({},e,{isSignedIn:l,user:c})):!1===l?r.a.createElement(o.a,{to:{pathname:"/login"}}):r.a.createElement("div",null,"Loading...")}}))}function $(e){var t=e.component,a=Object(T.a)(e,["component"]),n=_(a.user,a.isSignedIn),s=Object(E.a)(n,2),c=(s[0],s[1]);return r.a.createElement(o.b,Object.assign({},a,{render:function(e){return!0===c?r.a.createElement(o.a,{to:{pathname:"/polls"}}):!1===c?r.a.createElement(t,e):r.a.createElement("div",null,"Loading...")}}))}var J=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,null,r.a.createElement(o.d,null,r.a.createElement($,{path:"/",exact:!0,component:m}),r.a.createElement($,{path:"/login",exact:!0,component:O}),r.a.createElement($,{path:"/signup/:id",exact:!0,component:S}),r.a.createElement(U,{path:"/polls",exact:!0,component:z}),r.a.createElement(U,{path:"/mypolls",exact:!0,component:V}),r.a.createElement(o.b,{path:"/Page404",exact:!0,component:x}),r.a.createElement(o.a,{to:"/Page404"}))))};a(73);var Q=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(J,null))};c.a.render(r.a.createElement(Q,null),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.099dded4.chunk.js.map